<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>koshachy::HTTP протокол</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
  </head>
  <body>
    <div class="content">
      <div class="header">
        <span><h1>HTTP протокол</h1></span>
      </div>
      <p>HTTP (HyperText Transfer Protocol) — протокол для передачи данных, работающий на прикладном уровне. HTTP протокол работает поверх других уровней сетевого взаимодействия, используя зачастую <a href="https://ru.wikipedia.org/wiki/TCP">TCP</a> в качестве транспортного протокола.</p>
      <p>HTTP протокол работает по принципу «запрос-ответ» и использует клиент-серверную модель передачи данных: клиент формирует запрос и отправляет на сервер, сервер, согласно полученному запросу, формирует ответ.</p>
      <p>Важно отметить, что сам протокол HTTP не сохраняет состояние между запросом и ответом, то есть не осведомлен о предыдущих запросах и ответах. Запомнить состояние протокола можно с помощью компонентов клиента или сервера, использующих HTTP. Например, <a href="https://ru.wikipedia.org/wiki/HTTP_cookie">HTTP cookies</a>.</p>
      <ul>
        <li><a href="#interaction">Взаимодействие компонентов протокола</a></li>
        <li><a href="#messages">Сообщения протокола</a>
          <ul>
            <li><a href="request">Запрос</a></li>
            <li><a href="response">Ответ</a></li>
          </ul>
        </li>
        <li><a href="#dialog">Пример HTTP диалога</a></li>
        <li><a href="#security">Безопасность протокола</a></li>
      </ul>
      <h2><a name="interaction"/>Взаимодействие компонентов протокола</h2>
      <p>Как говорилось выше, протокол использует клиент-серверную архитектуру обмена данными: <!-- Согласно спецификации <a target="_blank" href="https://tools.ietf.org/html/rfc2616">RFC 2616</a>, в передаче данных участвуют следующие компоненты: --></p>
      <ul>
        <li><strong>Клиент</strong>. Клиент устанавливает соединение с сервером и инициирует запрос.</li>
        <li><strong>Сервер</strong>. Сервер принимает запросы от клиентов и посылает ответ.</li>
        
      </ul>
      <p>Кроме этих двух основных компонентов в HTTP диалоге могут участвовать и другие, например:</p>
      <img style="margin:0px auto;display:block" src="../http/images/proto_example.png"/>
      <ul>
        <li><strong>Прокси</strong>. Прокси является посредником, который одновременно выполняет функции сервера и клиента. Прокси может принять запрос клиента, обработать его и послать необходимый запрос к серверу.</li>
        <li><strong>Шлюз</strong>. Шлюз — это сервер, выполняющий роль посредника. В отличии от прокси, клиент может не знать, что он взаимодействует с шлюзом, а не конечным сервером. Шлюз, в свою очередь, обращается к серверу, на котором хранится запрашиваемый ресурс.</li>
      </ul>
      <h2><a name="messages"/>Сообщения протокола</h2>
      <p>Сообщения HTTP протокола делятся на:</p>
      <ul>
        <li><strong>Запросы</strong>, посылаемые клиентами (или формируемые прокси).</li>
        <li><strong>Ответы</strong>, сформированные сервером, опираясь на данные запроса.</li>
        </ul>
      <p></p>
      <h3><a name="request"/>Запрос</h3>
      <p>Клиент отправляет серверу запрос для предоставления ему какого-либо ресурса. В состав запроса входят следующие компоненты:</p>
      <ul>
        <li><strong>Строка запроса</strong>
          <p>Строка запроса имеет следующий вид:</p>
          <div class="request">
            <pre>&nbsp;метод URI HTTP/версия</pre>
          </div>
          <ul>
            <li><strong>Метод</strong> определяет способ взаимодействия на указанный ресурс. Согласно спецификации протокола HTTP/1.1, существует множество методов для операций над ресурсами. Веб-браузеры в основном используют <em>GET</em> (получение ресурса) и <em>POST</em> (передача данных на сервер) запросы.</li>
            <li><strong>URI</strong> <em>(Uniform Resource Identifier)</em> — это путь до ресурса, над которым нужно произвести установленное методом взаимодействие.</li>
            <li><strong>HTTP/версия</strong> версия используемого HTTP протокола. Например, <em>HTTP/1.1</em> — версия указывается как два числа, разделенные точкой.</li>
          </ul>
          <p>Пример строки запроса до ресурса <a href="https://habrahabr.ru">habrahabr.ru</a>:</p>
          <div class="request">
            <pre>&nbsp;GET / HTTP/1.1</br>&nbsp;Host: habrahabr.ru</pre>
          </div>
        </li>
        <li><strong>Поле заголовка</strong>
          <p>В предыдущем примере мы уже использовали поле заголовка <em>Host</em>, которое определяет доменное имя, к которому идет запрос.</br> Поле заголовка позволяет передавать дополнительную информацию серверу для запроса.
          <!-- http://lib.ru/WEBMASTER/rfc2068/section-5.html#p3 -->
          </p>
        </li>
        <li><strong>Пустая строка</strong>
          <p>Пустая строка <em>(CRLF)</em> необходима для отделения полей заголовка от тела запроса.</p>
        </li>
        <li><strong>Тело запроса</strong>
          <p>Тело запроса — опциональная часть HTTP запроса. Использование тела запроса возможно только тогда, когда метод запроса это допускает.</p>
        </li>
      </ul>
      <h3><a name="response"/>Ответ</h3>
      <p>Ответы сервера имеют следующий формат, схожий с форматом запроса:</p>
      <ul>
        <li><strong>Строка состояния</strong>
          <p>Строка запроса имеет следующий вид:</p>
          <div class="request">
            <pre>&nbsp;HTTP/версия код_состояния пояснение</pre>
          </div>
          <ul>
            <li><strong>HTTP/версия</strong> — версия используемого HTTP протокола.</li>
            <li><strong><a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP">Код состояния</a></strong> - трехзначный код, характеризующий результат запроса. Например, <em>404</em> - запрашиваемый URI не найден. Коды состояния делятся на пять групп, принадлежность определяется первой цифрой кода:
              <ul>
                <li><strong>1xx</strong> — информационные коды.</li>
                <li><strong>2xx</strong> — коды успешной обработки запроса.</li>
                <li><strong>3xx</strong> — коды перенаправления запроса.</li>
                <li><strong>4xx</strong> — коды ошибок клиента.</li>
                <li><strong>5xx</strong> — коды ошибок сервера.</li>
              </ul>
            </li>
            <li><strong>Пояснение</strong> к коду состояния. В случае с кодом <em>404</em>, пояснением будет <em>Not Found</em></li>
          </ul>
          <p>Пример строки состояния:</p>
          <div class="request">
            <pre>&nbsp;HTTP/1.1 404 Not Found</pre>
          </div>
        </li>
        <li><strong>Поля заголовка</strong>
          <p>Поле заголовка позволяет передавать дополнительную информацию клиенту. Например, заголовок поля <em>Content-Type</em> показывает, как следует клиенту обрабатывать ресурс, а <em>Content-Length</em> указывает число байт в теле ответа.
          <!-- http://lib.ru/WEBMASTER/rfc2068/section-6.html#p2 -->
          </p>
        </li>
        <li><strong>Пустая строка</strong>
          <p>Пустая строка <em>(CRLF)</em>, как и в случае с HTTP запросом, необходима для отделения полей заголовка от тела ответа.</p>
        </li>
        <li><strong>Тело ответа</strong>
          <p>Тело ответа содержит запрашиваемый ресурс: html-страница, аудиофайл, изображение и другие типы данных.</p>
        </li>
      </ul>
      <h2><a name="dialog"/>Пример HTTP диалога</h2>
      <p>Рассмотрим пример простого запроса к ресурсу <em>galaxygamble.com</em> через браузер.</p>
      <p>Запрос имеет следующий вид:</p>
      <div class="request">
        <pre>
&nbsp;GET / HTTP/1.1
&nbsp;Host: galaxygamble.com
&nbsp;Connection: keep-alive
&nbsp;Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
&nbsp;Upgrade-Insecure-Requests: 1
&nbsp;User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.112 Safari/537.36
&nbsp;Accept-Encoding: gzip, deflate, sdch
&nbsp;Accept-Language: en-US,en;q=0.8,ru;q=0.6
        </pre>
      </div>
      <p><strong>Рассмотрим отправленный запрос</strong></p>
      <ol>
        <li>Браузер (клиент) обращается к ресурсу с методом <em>GET</em> используя <em>1.1</em> версию HTTP протокола.</li>
        <li>Клиент обращается к хосту с доменным именем <em>galaxygamble.com</em>.</li>
        <li>Значение <em>keep-alive</em> в поле <em>Connection</em> означает, что после обработки запроса сервер не должен закрывать TCP-соединение.</li>
        <li>В поле <em>Accept</em> клиент указывает типы данных, которые он готов обрабатывать.</li>
        <li>Поле <em>Upgrade-Insecure-Requests</em> указывает, что клиент предпочитает безопасное <a href="#security">HTTPS</a> соединение.</li>
        <li>Поле заголовка <em>User-Agent</em> передает информацию о клиенте.</li>
        <li><em>Accept-Encoding</em> показывает перечень поддерживаемых способов кодирования.</li>
        <li><em>Accept-Language</em> показывает список поддерживаемых естественных языков.</li>
      </ol>
      <p>Ответ от сервера имеет следующий вид:</p>
      <div class="request">
        <pre>
&nbsp;HTTP/1.1 200 OK
&nbsp;Server: nginx/1.1.19
&nbsp;Date: Wed, 04 May 2016 17:42:52 GMT
&nbsp;Content-Type: text/html; charset=utf-8
&nbsp;Transfer-Encoding: chunked
&nbsp;Connection: keep-alive
&nbsp;Content-Encoding: gzip

&nbsp;*Далее идет тело ответа*
        </pre>
      </div>
      <p><strong>Рассмотрим принятый от сервера ответ</strong></p>
      <ol>
        <li>Сервер отправляет код состояния и пояснение <em>200 OK</em> (запрос успешно обработан) и указывает версию HTTP протокола.</li>
        <li>Поле <em>Server</em> показывает имя и номер версии сервера.</li>
        <li><em>Date</em> показывает дату и время генерации ответа.</li>
        <li><em>Content-Type</em> показывает тип данных, содержащихся в теле ответа.</li>
        <li>Поле <em>Transfer-Encoding</em> показывает способ кодирования, который был применен. Значение <em>chunked</em> указывает, что сообщение было разбито на небольшие части.</li>
        <li>Аналогично запросу, указывается информация о соединении в поле <em>Connection</em>.</li>
        <li>Поле <em>Content-Encoding</em> показывает способ кодирования.</li>
        <li>Далее следует тело ответа в виде html-страницы.</li>
      </ol>
      <h2><a name="security"/>Безопасность протокола</h2>
      <p>HTTP протокол не предполагает использование шифрования — данные передаются в открытом виде. Для защиты передаваемой информации по протоколу HTTP может использоваться расширение протокола — HTTPS (HyperText Transfer Protocol Secure). HTTPS использует для шифрования криптографические протоколы <a href="https://ru.wikipedia.org/wiki/SSL"><em>SSL</em></a> или <a href="https://ru.wikipedia.org/wiki/TLS"><em>TLS</em></a>, что позволяет защитить информацию от перехвата злоумышленником.<br/>
      </p>
      <h2>Смотрите также</h2>
      <p>Дополнительную информацию можете найти на следующих ресурсах:</p>
      <ul>
        <li><a href="https://ru.wikipedia.org/wiki/HTTP">HTTP - Википедия</a></li>
        <li><a href="https://habrahabr.ru/post/215117/">Простым языком об HTTP</a></li>
        <li><a href="https://tools.ietf.org/html/rfc2616">RFC 2616 - Hypertext Transfer Protocol -- HTTP/1.1 </a></li>
        <li><a href="http://www.intuit.ru/studies/courses/485/341/lecture/8182?page=1">НОУ ИНТУИТ | Лекция | Введение в клиент-серверные технологии Веб. Протокол HTTP</a></li>
        <li><a href="https://dev.opera.com/articles/http-basic-introduction/">Dev.Opera — HTTP — an Application-Level Protocol</a></li>
      </ul>
      <!-- <div class="footer">
        <span><p>koshachy</p></span>
      </div> -->
    </div>
  </body>
</html>
